import{g as _}from"./@babel.d3038ccc.js";import{r as o}from"./react.9f8bb2ca.js";import{d as z}from"./debounce.db2fda29.js";function j(t){let{debounce:r,scroll:s,polyfill:f,offsetSize:l}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const u=f||(typeof window>"u"?class{}:window.ResizeObserver);if(!u)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[m,p]=o.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),e=o.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),a=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,b=o.exports.useRef(!1);o.exports.useEffect(()=>(b.current=!0,()=>void(b.current=!1)));const[E,h,c]=o.exports.useMemo(()=>{const n=()=>{if(!e.current.element)return;const{left:x,top:y,width:C,height:L,bottom:R,right:S,x:B,y:M}=e.current.element.getBoundingClientRect(),i={left:x,top:y,width:C,height:L,bottom:R,right:S,x:B,y:M};e.current.element instanceof HTMLElement&&l&&(i.height=e.current.element.offsetHeight,i.width=e.current.element.offsetWidth),Object.freeze(i),b.current&&!H(e.current.lastBounds,i)&&p(e.current.lastBounds=i)};return[n,d?z(n,d):n,a?z(n,a):n]},[p,l,a,d]);function v(){e.current.scrollContainers&&(e.current.scrollContainers.forEach(n=>n.removeEventListener("scroll",c,!0)),e.current.scrollContainers=null),e.current.resizeObserver&&(e.current.resizeObserver.disconnect(),e.current.resizeObserver=null)}function w(){!e.current.element||(e.current.resizeObserver=new u(c),e.current.resizeObserver.observe(e.current.element),s&&e.current.scrollContainers&&e.current.scrollContainers.forEach(n=>n.addEventListener("scroll",c,{capture:!0,passive:!0})))}const O=n=>{!n||n===e.current.element||(v(),e.current.element=n,e.current.scrollContainers=g(n),w())};return q(c,Boolean(s)),T(h),o.exports.useEffect(()=>{v(),w()},[s,c,h]),o.exports.useEffect(()=>v,[]),[O,m,E]}function T(t){o.exports.useEffect(()=>{const r=t;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[t])}function q(t,r){o.exports.useEffect(()=>{if(r){const s=t;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[t,r])}function g(t){const r=[];if(!t||t===document.body)return r;const{overflow:s,overflowX:f,overflowY:l}=window.getComputedStyle(t);return[s,f,l].some(u=>u==="auto"||u==="scroll")&&r.push(t),[...r,...g(t.parentElement)]}const D=["x","y","top","bottom","left","right","width","height"],H=(t,r)=>D.every(s=>t[s]===r[s]),W=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"})),P=_(W);export{P as r,j as u};
