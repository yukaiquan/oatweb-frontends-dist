import{r as d,a as pe}from"./react.9f8bb2ca.js";import{r as Bn}from"./react-dom.55372f0a.js";import{a as y,j as Mn}from"./@jbrowse.1c1f30ba.js";function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},P.apply(this,arguments)}function Rn(e,t){if(e==null)return{};var r,o,i={},u=Object.keys(e);for(o=0;o<u.length;o++)t.indexOf(r=u[o])>=0||(i[r]=e[r]);return i}function Le(e){var t=d.exports.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(o){r[o]=function(){var i;return(i=t.fn[o]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function Pn(e){return d.exports.useReducer(function(t,r){return P({},t,typeof r=="function"?r(t):r)},e)}var Dn=d.exports.createContext(void 0),me=typeof window<"u"&&"ontouchstart"in window,Nn=function(e,t,r){return Math.max(Math.min(e,r),t)},bn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Nn(e,1*(1-r),Math.max(6,t)*(1+r))},Wn=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?d.exports.useEffect:d.exports.useLayoutEffect;function Qe(e,t,r){var o=d.exports.useRef(t);o.current=t,d.exports.useEffect(function(){function i(u){o.current(u)}return e&&window.addEventListener(e,i,r),function(){e&&window.removeEventListener(e,i)}},[e])}var jn=["container"];function zn(e){var t=e.container,r=t===void 0?document.body:t,o=Rn(e,jn);return Bn.exports.createPortal(y("div",{...P({},o)}),r)}function qn(e){return y("svg",{...P({width:"44",height:"44",viewBox:"0 0 768 768"},e),children:y("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"})})}function Kn(e){return y("svg",{...P({width:"44",height:"44",viewBox:"0 0 768 768"},e),children:y("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"})})}function Un(e){return y("svg",{...P({width:"44",height:"44",viewBox:"0 0 768 768"},e),children:y("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"})})}function Gn(){return d.exports.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function In(e){var t=e.touches[0],r=t.clientX,o=t.clientY;if(e.touches.length>=2){var i=e.touches[1],u=i.clientX,c=i.clientY;return[(r+u)/2,(o+c)/2,Math.sqrt(Math.pow(u-r,2)+Math.pow(c-o,2))]}return[r,o,0]}var Re=function(e,t,r,o){var i=r*t,u=(i-o)/2,c=void 0,l=e;return i<=o?(c=1,l=0):e>0&&u-e<=0?(c=2,l=u):e<0&&u+e<=0&&(c=3,l=-u),[c,l]};function Yn(e,t,r,o,i,u,c,l,v,f){c===void 0&&(c=innerWidth/2),l===void 0&&(l=innerHeight/2),v===void 0&&(v=0),f===void 0&&(f=0);var m=Re(e,u,r,innerWidth)[0],g=Re(t,u,o,innerHeight),E=innerWidth/2,R=innerHeight/2;return{x:c-u/i*(c-(E+e))-E+(o/r>=3&&r*u===innerWidth?0:m?v/2:v),y:l-u/i*(l-(R+t))-R+(g[0]?f/2:f),lastCX:c,lastCY:l}}function Sn(e,t,r){var o=e%180!=0;return o?[r,t,o]:[t,r,o]}function Xn(e,t,r){var o=Sn(r,innerWidth,innerHeight),i=o[0],u=o[1],c=0,l=i,v=u,f=e/t*u,m=t/e*i;return e<i&&t<u?(l=e,v=t):e<i&&t>=u?l=f:e>=i&&t<u||e/t>i/u?v=m:t/e>=3&&!o[2]?c=((v=m)-u)/2:l=f,{width:l,height:v,x:0,y:c,pause:!0}}function kn(e,t){var r=t.leading,o=r!==void 0&&r,i=t.maxWait,u=t.wait,c=u===void 0?i||0:u,l=d.exports.useRef(e);l.current=e;var v=d.exports.useRef(0),f=d.exports.useRef(),m=function(){return f.current&&clearTimeout(f.current)},g=d.exports.useCallback(function(){var E=[].slice.call(arguments),R=Date.now();function A(){v.current=R,m(),l.current.apply(null,E)}var k=v.current,C=R-k;if(k===0&&(o&&A(),v.current=R),i!==void 0){if(C>i)return void A()}else C<c&&(v.current=R);m(),f.current=setTimeout(function(){A(),v.current=0},c)},[c,i,o]);return g.cancel=m,g}var Ln=function(e,t,r){return Ie(e,t,r,100,function(o){return o},function(){return Ie(t,e,r)})},Jn=function(e){return 1-Math.pow(1-e,4)};function Ie(e,t,r,o,i,u){o===void 0&&(o=400),i===void 0&&(i=Jn);var c=t-e;if(c!==0){var l=Date.now(),v=0,f=function(){var g=Math.min(1,(Date.now()-l)/o);r(e+i(g)*c)&&g<1?m():(cancelAnimationFrame(v),g>=1&&u&&u())};m()}function m(){v=requestAnimationFrame(f)}}var Qn={T:0,L:0,W:0,H:0,FIT:void 0},Fn=function(){var e=d.exports.useRef(!1);return d.exports.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Zn=["className"];function $n(e){var t=e.className,r=Rn(e,Zn);return y("div",{...P({className:"PhotoView__Spinner "+t},r),children:Mn("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white",children:[y("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),y("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})]})})}var et=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function nt(e){var t=e.src,r=e.loaded,o=e.broken,i=e.className,u=e.onPhotoLoad,c=e.loadingElement,l=e.brokenElement,v=Rn(e,et),f=Fn();return t&&!o?pe.createElement(pe.Fragment,null,y("img",{...P({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(m){var g=m.target;f.current&&u({loaded:!0,naturalWidth:g.naturalWidth,naturalHeight:g.naturalHeight})},onError:function(){f.current&&u({broken:!0})},alt:""},v)}),!r&&(y("span",{className:"PhotoView__icon",children:c})||y($n,{className:"PhotoView__icon"}))):l?y("span",{className:"PhotoView__icon",children:typeof l=="function"?l({src:t}):l}):null}var tt={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function rt(e){var t=e.item,r=t.src,o=t.render,i=t.width,u=i===void 0?0:i,c=t.height,l=c===void 0?0:c,v=t.originRef,f=e.visible,m=e.speed,g=e.easing,E=e.wrapClassName,R=e.className,A=e.style,k=e.loadingElement,C=e.brokenElement,Y=e.onPhotoTap,j=e.onMaskTap,Ze=e.onReachMove,He=e.onReachUp,_n=e.onPhotoResize,H=e.isActive,ge=e.expose,ln=Pn(tt),p=ln[0],b=ln[1],De=d.exports.useRef(0),Fe=Fn(),dn=p.naturalWidth,re=dn===void 0?u:dn,W=p.naturalHeight,S=W===void 0?l:W,$e=p.width,z=$e===void 0?u:$e,fn=p.height,xe=fn===void 0?l:fn,en=p.loaded,nn=en===void 0?!r:en,_e=p.broken,D=p.x,oe=p.y,q=p.touched,En=p.stopRaf,we=p.maskTouched,K=p.rotate,X=p.scale,vn=p.CX,Oe=p.CY,Ee=p.lastX,tn=p.lastY,w=p.lastCX,hn=p.lastCY,ie=p.lastScale,Ye=p.touchTime,Be=p.touchLength,U=p.pause,Xe=p.reach,rn=Le({onScale:function(n){return ae(bn(n))},onRotate:function(n){K!==n&&(ge({rotate:n}),b(P({rotate:n},Xn(re,S,n))))}});function ae(n,a,h){X!==n&&(ge({scale:n}),b(P({scale:n},Yn(D,oe,z,xe,X,n,a,h),n<=1&&{x:0,y:0})))}var mn=kn(function(n,a,h){if(h===void 0&&(h=0),(q||we)&&H){var Ne=Sn(K,z,xe),ue=Ne[0],G=Ne[1];if(h===0&&De.current===0){var N=Math.abs(n-vn)<=20,L=Math.abs(a-Oe)<=20;if(N&&L)return void b({lastCX:n,lastCY:a});De.current=N?a>Oe?3:2:1}var We=n-w,Se=a-hn,J=void 0;if(h===0){var Te=Re(We+Ee,X,ue,innerWidth)[0],qe=Re(Se+tn,X,G,innerHeight);J=function(be,se,le,ne){return se&&be===1||ne==="x"?"x":le&&be>1||ne==="y"?"y":void 0}(De.current,Te,qe[0],Xe),J!==void 0&&Ze(J,n,a,X)}if(J==="x"||we)return void b({reach:"x"});var ce=bn(X+(h-Be)/100/2*X,re/z,.2);ge({scale:ce}),b(P({touchLength:h,reach:J,scale:ce},Yn(D,oe,z,xe,X,ce,n,a,We,Se)))}},{maxWait:8});function on(n){return!En&&!q&&(Fe.current&&b(P({},n,{pause:f})),Fe.current)}var ye,$,Ce,an,pn,gn,xn,I,wn=(pn=function(n){return on({x:n})},gn=function(n){return on({y:n})},xn=function(n){return Fe.current&&(ge({scale:n}),b({scale:n})),!q&&Fe.current},I=Le({X:function(n){return pn(n)},Y:function(n){return gn(n)},S:function(n){return xn(n)}}),function(n,a,h,Ne,ue,G,N,L,We,Se,J){var Te=Sn(Se,ue,G),qe=Te[0],ce=Te[1],be=Re(n,L,qe,innerWidth),se=be[0],le=be[1],ne=Re(a,L,ce,innerHeight),Ke=ne[0],Cn=ne[1],Ue=Date.now()-J;if(Ue>=200||L!=N||Math.abs(We-N)>1){var ke=Yn(n,a,ue,G,N,L),de=ke.x,Ve=ke.y,F=se?le:de!==n?de:null,Ge=Ke?Cn:Ve!==a?Ve:null;return F!==null&&Ie(n,F,I.X),Ge!==null&&Ie(a,Ge,I.Y),void(L!=N&&Ie(N,L,I.S))}var Ae=(n-h)/Ue,Me=(a-Ne)/Ue,Pe=Math.sqrt(Math.pow(Ae,2)+Math.pow(Me,2)),fe=!1,ve=!1;(function(Q,T){var V=Q,he=0,Z=void 0,O=0,Je=function(cn){Z||(Z=cn);var sn=cn-Z,Tn=Math.sign(Q),Vn=-.001*Tn,An=Math.sign(-V)*Math.pow(V,2)*2e-4,On=V*sn+(Vn+An)*Math.pow(sn,2)/2;he+=On,Z=cn,Tn*(V+=(Vn+An)*sn)<=0?B():T(he)?te():B()};function te(){O=requestAnimationFrame(Je)}function B(){cancelAnimationFrame(O)}te()})(Pe,function(Q){var T=n+Q*(Ae/Pe),V=a+Q*(Me/Pe),he=Re(T,N,qe,innerWidth),Z=he[0],O=he[1],Je=Re(V,N,ce,innerHeight),te=Je[0],B=Je[1];if(Z&&!fe&&(fe=!0,se?Ie(T,O,I.X):Ln(O,T+(T-O),I.X)),te&&!ve&&(ve=!0,Ke?Ie(V,B,I.Y):Ln(B,V+(V-B),I.Y)),fe&&ve)return!1;var cn=fe||I.X(O),sn=ve||I.Y(B);return cn&&sn})}),je=(ye=Y,$=function(n,a){Xe||ae(X!==1?1:Math.max(2,re/z),n,a)},Ce=d.exports.useRef(0),an=kn(function(){Ce.current=0,ye.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var n=[].slice.call(arguments);Ce.current+=1,an.apply(void 0,n),Ce.current>=2&&(an.cancel(),Ce.current=0,$.apply(void 0,n))});function ze(n,a){if(De.current=0,(q||we)&&H){b({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var h=bn(X,re/z);if(wn(D,oe,Ee,tn,z,xe,X,h,ie,K,Ye),He(n,a),vn===n&&Oe===a){if(q)return void je(n,a);we&&j(n,a)}}}function un(n,a,h){h===void 0&&(h=0),b({touched:!0,CX:n,CY:a,lastCX:n,lastCY:a,lastX:D,lastY:oe,lastScale:X,touchLength:h,touchTime:Date.now()})}function yn(n){b({maskTouched:!0,CX:n.clientX,CY:n.clientY,lastX:D,lastY:oe})}Qe(me?void 0:"mousemove",function(n){n.preventDefault(),mn(n.clientX,n.clientY)}),Qe(me?void 0:"mouseup",function(n){ze(n.clientX,n.clientY)}),Qe(me?"touchmove":void 0,function(n){n.preventDefault();var a=In(n);mn.apply(void 0,a)},{passive:!1}),Qe(me?"touchend":void 0,function(n){var a=n.changedTouches[0];ze(a.clientX,a.clientY)},{passive:!1}),Qe("resize",kn(function(){nn&&!q&&(b(Xn(re,S,K)),_n())},{maxWait:8})),Wn(function(){H&&ge(P({scale:X,rotate:K},rn))},[H]);var ee=function(n,a,h,Ne,ue,G,N,L,We,Se){var J=function(de,Ve,F,Ge,Ae){var Me=d.exports.useRef(!1),Pe=Pn({lead:!0,scale:F}),fe=Pe[0],ve=fe.lead,Q=fe.scale,T=Pe[1],V=kn(function(he){try{return Ae(!0),T({lead:!1,scale:he}),Promise.resolve()}catch(Z){return Promise.reject(Z)}},{wait:Ge});return Wn(function(){Me.current?(Ae(!1),T({lead:!0}),V(F)):Me.current=!0},[F]),ve?[de*Q,Ve*Q,F/Q]:[de*F,Ve*F,1]}(G,N,L,We,Se),Te=J[0],qe=J[1],ce=J[2],be=function(de,Ve,F,Ge,Ae){var Me=d.exports.useState(Qn),Pe=Me[0],fe=Me[1],ve=d.exports.useState(0),Q=ve[0],T=ve[1],V=d.exports.useRef(),he=Le({OK:function(){return de&&T(4)}});function Z(O){Ae(!1),T(O)}return d.exports.useEffect(function(){if(V.current||(V.current=Date.now()),F){if(function(O,Je){var te=O&&O.current;if(te&&te.nodeType===1){var B=te.getBoundingClientRect();Je({T:B.top,L:B.left,W:B.width,H:B.height,FIT:te.tagName==="IMG"?getComputedStyle(te).objectFit:void 0})}}(Ve,fe),de)return Date.now()-V.current<250?(T(1),requestAnimationFrame(function(){T(2),requestAnimationFrame(function(){return Z(3)})}),void setTimeout(he.OK,Ge)):void T(4);Z(5)}},[de,F]),[Q,Pe]}(n,a,h,We,Se),se=be[0],le=be[1],ne=le.W,Ke=le.FIT,Cn=innerWidth/2,Ue=innerHeight/2,ke=se<3||se>4;return[ke?ne?le.L:Cn:Ne+(Cn-G*L/2),ke?ne?le.T:Ue:ue+(Ue-N*L/2),Te,ke&&Ke?Te*(le.H/ne):qe,se===0?ce:ke?ne/(G*L)||.01:ce,ke?Ke?1:0:1,se,Ke]}(f,v,nn,D,oe,z,xe,X,m,function(n){return b({pause:n})}),s=ee[4],x=ee[6],_="transform "+m+"ms "+g,M={className:R,onMouseDown:me?void 0:function(n){n.stopPropagation(),n.button===0&&un(n.clientX,n.clientY,0)},onTouchStart:me?function(n){n.stopPropagation(),un.apply(void 0,In(n))}:void 0,onWheel:function(n){if(!Xe){var a=bn(X-n.deltaY/100/2,re/z);b({stopRaf:!0}),ae(a,n.clientX,n.clientY)}},style:{width:ee[2],height:ee[3],opacity:ee[5],objectFit:x===4?void 0:ee[7],transform:K?"rotate("+K+"deg)":void 0,transition:x>2?_+", opacity "+m+"ms ease, height "+(x<4?m/2:x>4?m:0)+"ms "+g:void 0}};return y("div",{className:"PhotoView__PhotoWrap"+(E?" "+E:""),style:A,onMouseDown:!me&&H?yn:void 0,onTouchStart:me&&H?function(n){return yn(n.touches[0])}:void 0,children:y("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+s+", 0, 0, "+s+", "+ee[0]+", "+ee[1]+")",transition:q||U?void 0:_,willChange:H?"transform":void 0},children:r?y(nt,{...P({src:r,loaded:nn,broken:_e},M,{onPhotoLoad:function(n){b(P({},n,n.loaded&&Xn(n.naturalWidth||0,n.naturalHeight||0,K)))},loadingElement:k,brokenElement:C})}):o&&o({attrs:M,scale:s,rotate:K})})})}var Hn={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function ot(e){var t=e.loop,r=t===void 0?3:t,o=e.speed,i=e.easing,u=e.photoClosable,c=e.maskClosable,l=c===void 0||c,v=e.maskOpacity,f=v===void 0?1:v,m=e.pullClosable,g=m===void 0||m,E=e.bannerVisible,R=E===void 0||E,A=e.overlayRender,k=e.toolbarRender,C=e.className,Y=e.maskClassName,j=e.photoClassName,Ze=e.photoWrapClassName,He=e.loadingElement,_n=e.brokenElement,H=e.images,ge=e.index,ln=ge===void 0?0:ge,p=e.onIndexChange,b=e.visible,De=e.onClose,Fe=e.afterClose,dn=e.portalContainer,re=Pn(Hn),W=re[0],S=re[1],$e=d.exports.useState(0),z=$e[0],fn=$e[1],xe=W.x,en=W.touched,nn=W.pause,_e=W.lastCX,D=W.lastCY,oe=W.bg,q=oe===void 0?f:oe,En=W.lastBg,we=W.overlay,K=W.minimal,X=W.scale,vn=W.rotate,Oe=W.onScale,Ee=W.onRotate,tn=e.hasOwnProperty("index"),w=tn?ln:z,hn=tn?p:fn,ie=d.exports.useRef(w),Ye=H.length,Be=H[w],U=typeof r=="boolean"?r:Ye>r,Xe=function(s,x){var _=d.exports.useReducer(function(h){return!h},!1)[1],M=d.exports.useRef(0),n=function(h,Ne){var ue=d.exports.useRef(h);function G(N){ue.current=N}return d.exports.useMemo(function(){(function(N){s?(N(s),M.current=1):M.current=2})(G)},[h]),[ue.current,G]}(s),a=n[1];return[n[0],M.current,function(){_(),M.current===2&&(a(!1),x&&x()),M.current=0}]}(b,Fe),rn=Xe[0],ae=Xe[1],mn=Xe[2];Wn(function(){if(rn)return S({pause:!0,x:w*-(innerWidth+20)}),void(ie.current=w);S(Hn)},[rn]);var on=Le({close:function(s){Ee&&Ee(0),S({overlay:!0,lastBg:q}),De(s)},changeIndex:function(s,x){x===void 0&&(x=!1);var _=U?ie.current+(s-w):s,M=Ye-1,n=Nn(_,0,M),a=U?_:n,h=innerWidth+20;S({touched:!1,lastCX:void 0,lastCY:void 0,x:-h*a,pause:x}),ie.current=a,hn&&hn(U?s<0?M:s>M?0:s:n)}}),ye=on.close,$=on.changeIndex;function Ce(s){return s?ye():S({overlay:!we})}function an(){S({x:-(innerWidth+20)*w,lastCX:void 0,lastCY:void 0,pause:!0}),ie.current=w}function pn(s,x,_,M){s==="x"?function(n){if(_e!==void 0){var a=n-_e,h=a;!U&&(w===0&&a>0||w===Ye-1&&a<0)&&(h=a/2),S({touched:!0,lastCX:_e,x:-(innerWidth+20)*ie.current+h,pause:!1})}else S({touched:!0,lastCX:n,x:xe,pause:!1})}(x):s==="y"&&function(n,a){if(D!==void 0){var h=f===null?null:Nn(f,.01,f-Math.abs(n-D)/100/4);S({touched:!0,lastCY:D,bg:a===1?h:f,minimal:a===1})}else S({touched:!0,lastCY:n,bg:q,minimal:!0})}(_,M)}function gn(s,x){var _=s-(_e!=null?_e:s),M=x-(D!=null?D:x),n=!1;if(_<-40)$(w+1);else if(_>40)$(w-1);else{var a=-(innerWidth+20)*ie.current;Math.abs(M)>100&&K&&g&&(n=!0,ye()),S({touched:!1,x:a,lastCX:void 0,lastCY:void 0,bg:f,overlay:!!n||we})}}Qe("keydown",function(s){if(b)switch(s.key){case"ArrowLeft":$(w-1,!0);break;case"ArrowRight":$(w+1,!0);break;case"Escape":ye()}});var xn=function(s,x,_){return d.exports.useMemo(function(){var M=s.length;return _?s.concat(s).concat(s).slice(M+x-1,M+x+2):s.slice(Math.max(x-1,0),Math.min(x+2,M+1))},[s,x,_])}(H,w,U);if(!rn)return null;var I=we&&!ae,wn=b?q:En,je=Oe&&Ee&&{images:H,index:w,visible:b,onClose:ye,onIndexChange:$,overlayVisible:I,overlay:Be&&Be.overlay,scale:X,rotate:vn,onScale:Oe,onRotate:Ee},ze=o?o(ae):400,un=i?i(ae):"cubic-bezier(0.25, 0.8, 0.25, 1)",yn=o?o(3):600,ee=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return pe.createElement(zn,{className:"PhotoView-Portal"+(I?"":" PhotoView-Slider__clean")+(b?"":" PhotoView-Slider__willClose")+(C?" "+C:""),role:"dialog",onClick:function(s){return s.stopPropagation()},container:dn},b&&y(Gn,{}),y("div",{className:"PhotoView-Slider__Backdrop"+(Y?" "+Y:"")+(ae===1?" PhotoView-Slider__fadeIn":ae===2?" PhotoView-Slider__fadeOut":""),style:{background:wn?"rgba(0, 0, 0, "+wn+")":void 0,transitionTimingFunction:un,transitionDuration:(en?0:ze)+"ms",animationDuration:ze+"ms"},onAnimationEnd:mn}),R&&Mn("div",{className:"PhotoView-Slider__BannerWrap",children:[Mn("div",{className:"PhotoView-Slider__Counter",children:[w+1," / ",Ye]}),Mn("div",{className:"PhotoView-Slider__BannerRight",children:[k&&je&&k(je),y(qn,{className:"PhotoView-Slider__toolbarIcon",onClick:ye})]})]}),xn.map(function(s,x){var _=U||w!==0?ie.current-1+x:w+x;return pe.createElement(rt,{key:U?s.key+"/"+s.src+"/"+_:s.key,item:s,speed:ze,easing:un,visible:b,onReachMove:pn,onReachUp:gn,onPhotoTap:function(){return Ce(u)},onMaskTap:function(){return Ce(l)},wrapClassName:Ze,className:j,style:{left:(innerWidth+20)*_+"px",transform:"translate3d("+xe+"px, 0px, 0)",transition:en||nn?void 0:"transform "+yn+"ms "+ee},loadingElement:He,brokenElement:_n,onPhotoResize:an,isActive:(Be&&Be.key)===s.key,expose:S})}),!me&&R&&pe.createElement(pe.Fragment,null,(U||w!==0)&&pe.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return $(w-1,!0)}},pe.createElement(Kn,null)),(U||w+1<Ye)&&y("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return $(w+1,!0)},children:y(Un,{})})),A&&je&&y("div",{className:"PhotoView-Slider__Overlay",children:A(je)}))}var it=["children","onIndexChange","onVisibleChange"],at={images:[],visible:!1,index:0};function lt(e){var t=e.children,r=e.onIndexChange,o=e.onVisibleChange,i=Rn(e,it),u=Pn(at),c=u[0],l=u[1],v=d.exports.useRef(0),f=c.images,m=c.visible,g=c.index,E=Le({nextId:function(){return v.current+=1},update:function(k){var C=f.findIndex(function(j){return j.key===k.key});if(C>-1){var Y=f.slice();return Y.splice(C,1,k),void l({images:Y})}l(function(j){return{images:j.images.concat(k)}})},remove:function(k){l(function(C){var Y=C.images.filter(function(j){return j.key!==k});return{images:Y,index:Math.min(Y.length-1,g)}})},show:function(k){var C=f.findIndex(function(Y){return Y.key===k});l({visible:!0,index:C}),o&&o(!0,C,c)}}),R=Le({close:function(){l({visible:!1}),o&&o(!1,g,c)},changeIndex:function(k){l({index:k}),r&&r(k,c)}}),A=d.exports.useMemo(function(){return P({},c,E)},[c,E]);return pe.createElement(Dn.Provider,{value:A},t,y(ot,{...P({images:f,visible:m,index:g,onIndexChange:R.changeIndex,onClose:R.close},i)}))}var dt=function(e){var t,r,o=e.src,i=e.render,u=e.overlay,c=e.width,l=e.height,v=e.triggers,f=v===void 0?["onClick"]:v,m=e.children,g=d.exports.useContext(Dn),E=(t=function(){return g.nextId()},(r=d.exports.useRef({sign:!1,fn:void 0}).current).sign||(r.sign=!0,r.fn=t()),r.fn),R=d.exports.useRef(null);d.exports.useEffect(function(){return function(){g.remove(E)}},[]);var A=Le({render:function(C){return i&&i(C)},show:function(C,Y){g.show(E),function(j,Ze){if(m){var He=m.props[j];He&&He(Ze)}}(C,Y)}}),k=d.exports.useMemo(function(){var C={};return f.forEach(function(Y){C[Y]=A.show.bind(null,Y)}),C},[]);return d.exports.useEffect(function(){g.update({key:E,src:o,originRef:R,render:A.render,overlay:u,width:c,height:l})},[o]),m?d.exports.Children.only(d.exports.cloneElement(m,P({},k,{ref:R}))):null};export{lt as J,dt as Q};
