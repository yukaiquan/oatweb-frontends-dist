import{I as w}from"./internmap.b4fc497e.js";import{r as I,b as A,t as R,a as F,c as O}from"./d3-array.7bc8321b.js";import{i as S,a as P,b as j}from"./d3-interpolate.9abf35b8.js";import{f as z,p as $,a as q,b as B,c as C,d as D}from"./d3-format.fc8f847c.js";import"./d3-transition.f3d28b47.js";import"./d3-zoom.f1247752.js";function v(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}const y=Symbol("implicit");function N(){var n=new w,t=[],o=[],r=y;function e(i){let a=n.get(i);if(a===void 0){if(r!==y)return r;n.set(i,a=t.push(i)-1)}return o[a%o.length]}return e.domain=function(i){if(!arguments.length)return t.slice();t=[],n=new w;for(const a of i)n.has(a)||n.set(a,t.push(a)-1);return e},e.range=function(i){return arguments.length?(o=Array.from(i),e):o.slice()},e.unknown=function(i){return arguments.length?(r=i,e):r},e.copy=function(){return N(t,o).unknown(r)},v.apply(e,arguments),e}function E(){var n=N().unknown(void 0),t=n.domain,o=n.range,r=0,e=1,i,a,l=!1,f=0,s=0,m=.5;delete n.unknown;function c(){var u=t().length,p=e<r,g=p?e:r,M=p?r:e;i=(M-g)/Math.max(1,u-f+s*2),l&&(i=Math.floor(i)),g+=(M-g-i*(u-f))*m,a=i*(1-f),l&&(g=Math.round(g),a=Math.round(a));var k=I(u).map(function(x){return g+i*x});return o(p?k.reverse():k)}return n.domain=function(u){return arguments.length?(t(u),c()):t()},n.range=function(u){return arguments.length?([r,e]=u,r=+r,e=+e,c()):[r,e]},n.rangeRound=function(u){return[r,e]=u,r=+r,e=+e,l=!0,c()},n.bandwidth=function(){return a},n.step=function(){return i},n.round=function(u){return arguments.length?(l=!!u,c()):l},n.padding=function(u){return arguments.length?(f=Math.min(1,s=+u),c()):f},n.paddingInner=function(u){return arguments.length?(f=Math.min(1,u),c()):f},n.paddingOuter=function(u){return arguments.length?(s=+u,c()):s},n.align=function(u){return arguments.length?(m=Math.max(0,Math.min(1,u)),c()):m},n.copy=function(){return E(t(),[r,e]).round(l).paddingInner(f).paddingOuter(s).align(m)},v.apply(c(),arguments)}function G(n){return function(){return n}}function H(n){return+n}var b=[0,1];function h(n){return n}function d(n,t){return(t-=n=+n)?function(o){return(o-n)/t}:G(isNaN(t)?NaN:.5)}function J(n,t){var o;return n>t&&(o=n,n=t,t=o),function(r){return Math.max(n,Math.min(t,r))}}function K(n,t,o){var r=n[0],e=n[1],i=t[0],a=t[1];return e<r?(r=d(e,r),i=o(a,i)):(r=d(r,e),i=o(i,a)),function(l){return i(r(l))}}function L(n,t,o){var r=Math.min(n.length,t.length)-1,e=new Array(r),i=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)e[a]=d(n[a],n[a+1]),i[a]=o(t[a],t[a+1]);return function(l){var f=A(n,l,1,r)-1;return i[f](e[f](l))}}function Q(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function T(){var n=b,t=b,o=P,r,e,i,a=h,l,f,s;function m(){var u=Math.min(n.length,t.length);return a!==h&&(a=J(n[0],n[u-1])),l=u>2?L:K,f=s=null,c}function c(u){return u==null||isNaN(u=+u)?i:(f||(f=l(n.map(r),t,o)))(r(a(u)))}return c.invert=function(u){return a(e((s||(s=l(t,n.map(r),S)))(u)))},c.domain=function(u){return arguments.length?(n=Array.from(u,H),m()):n.slice()},c.range=function(u){return arguments.length?(t=Array.from(u),m()):t.slice()},c.rangeRound=function(u){return t=Array.from(u),o=j,m()},c.clamp=function(u){return arguments.length?(a=u?!0:h,m()):a!==h},c.interpolate=function(u){return arguments.length?(o=u,m()):o},c.unknown=function(u){return arguments.length?(i=u,c):i},function(u,p){return r=u,e=p,m()}}function U(){return T()(h,h)}function V(n,t,o,r){var e=R(n,t,o),i;switch(r=z(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(i=B(e,a))&&(r.precision=i),C(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=q(e,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=$(e))&&(r.precision=i-(r.type==="%")*2);break}}return D(r)}function W(n){var t=n.domain;return n.ticks=function(o){var r=t();return F(r[0],r[r.length-1],o==null?10:o)},n.tickFormat=function(o,r){var e=t();return V(e[0],e[e.length-1],o==null?10:o,r)},n.nice=function(o){o==null&&(o=10);var r=t(),e=0,i=r.length-1,a=r[e],l=r[i],f,s,m=10;for(l<a&&(s=a,a=l,l=s,s=e,e=i,i=s);m-- >0;){if(s=O(a,l,o),s===f)return r[e]=a,r[i]=l,t(r);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return n},n}function X(){var n=U();return n.copy=function(){return Q(n,X())},v.apply(n,arguments),W(n)}export{E as b,X as l};
